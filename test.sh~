#!/bin/bash

# VARIABILI FILE DI LOG E PERCORSI DI SALVATAGGIO
MAIL_FROM_NAME=$(hostname)
SOURCE_DIR="/home/antonio/Scrivania/archivio/"

# MAIN ***************************************************************
find $SOURCE_DIR -type d | sed '1,1d' > listD # CERCA SOLO CARTELLE

# CICLO CREA ELENCO ORDINE ULTIMA MODIFICA
cat /dev/null > listFtmp # AZZERA IL FILE
while read -r lineD; do
	find "$lineD" -maxdepth 1 -type f -printf "%T+ %p\n" | sort -nr >> listFtmp
done < listD
# CICLO PULISCE listFtmp
cat /dev/null > listF # AZZERA IL FILE
((CNT=0))
while read -r lineF; do
	listF[$CNT]=$(echo ${lineF:31})
	echo $listF[CNT]
	((CNT++))
	echo $CNT
done < listFtmp
rm listFtmp
